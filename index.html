<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../css/index.css" />
  <link rel="stylesheet" href="../css/alldesign.css" />
  <title>SHS</title>
  <style>
    /* ============================= */
    /* ðŸŒŸ RESPONSIVE STYLES */
    /* ============================= */
    
    /* General responsive adjustments */
    @media (max-width: 1200px) {
      
      .news-section {
        padding: 5rem 5%;
      }
      
      .announcement-grid, .head-info {
        gap: 1.5rem;
      }
    }
    
    @media (max-width: 992px) {
      
      
      .announcement-grid {
        grid-template-columns: 1fr 1fr;
      }
      
      .head-info {
        grid-template-columns: 1fr;
      }
      
      
      .map-location-box {
        width: 90%;
      }
    }
    
    @media (max-width: 768px) {
      .hero-content h1 {
        font-size: 2rem;
      }
      
      .featured-video {
        height: 300px;
      }
      
      .news-section {
        padding: 4rem 5%;
      }
      
      .news-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      
      .announcement-grid {
        grid-template-columns: 1fr;
      }
      
      .announcement-card {
        width: 100%;
        height: auto;
        max-width: 500px;
        margin: 0 auto;
      }
      
      .announcement-image {
        height: 300px;
      }
      
      .info {
        flex-direction: column;
        text-align: center;
        height: auto;
        padding: 1.5rem;
      }
      
      .info-icon {
        margin-bottom: 1rem;
      }
      
      .join-now-box {
        padding: 2rem;
      }
      
      .map-location-box iframe {
        height: 300px;
      }
    }
    
    @media (max-width: 576px) {
      .hero-section {
        height: 70vh;
      }
      
      .hero-content {
        padding: 0 1rem;
      }
      
      .featured-video-section {
        padding: 3rem 5%;
      }
      
      .featured-video {
        height: 250px;
      }
      
      .enroll-strands {
        padding: 1.5rem;
      }
      
      .strand-card {
        padding: 1.5rem;
      }
      
      .strand-card-left img {
        width: 70px;
        height: 70px;
      }
      
      .news-header h2 {
        font-size: 2rem;
      }
      
      .announcement-body {
        padding: 0.5rem 1rem 1.5rem 1rem;
      }
      
      .announcement-body h3 {
        font-size: 1.3rem;
      }
      
      .join-now-box h1 {
        font-size: 2rem;
      }
      
      .join-now-box a {
        font-size: 1rem;
        padding: 15px 25px;
      }
    }
    
  </style>
</head>
<body>
  <header class="container">
    <nav>
      <div class="logo">
        <a href="#">
          <img src="images/logo.png" alt="">
          <p><span class="text">Southville 8B</span><br>Senior High School</p>
        </a>
      </div>

      <div class="menu-toggle" id="menu-toggle">â˜°</div>

      <ul id="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="aboutus.html">About Us</a></li>
        <li><a href="admission.html">Admission</a></li>
        <li><a href="contact.html">Contact Us</a></li>
      </ul>
    </nav>

    <main>
      <header class="hero-section">
        <div class="hero-overlay"></div>
        <div class="hero-content">
          <h1>Welcome to Southville 8B Senior High School Portal</h1>
          <p>
            Academic Year 2025â€“2026 Enrollment Now Open!  
            Discover programs that help shape your future in TVL and Humms.
          </p>
        </div>
      </header>

      <section class="featured-video-section">
        <div class="featured-video">
          <video controls autoplay muted playsinline>
            <source src="video/sv8bvideo.mp4" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </div>

        <div class="enroll-strands">
          <h3>ðŸŒŸ Try Our New Strand Recommendation!</h3>
          <p>Not sure which strand suits you best? Take our quick assessment to find the perfect strand based on your interests and skills.</p>

          <div class="strand-card">
            <div class="strand-card-left">
                <img src="https://via.placeholder.com/80/4a69bd/FFFFFF?text=%F0%9F%8E%AF" alt="Target icon">
            </div>
            <div class="strand-card-right">
              <h2>Find Your Perfect Strand ðŸŽ¯</h2>
              <p>Answer a few fun questions and discover which strand will help you excel academically and personally.</p>
              <a href="assessment.html" class="btn-recommend" target="_blank" rel="noopener noreferrer">Take the Assessment</a>
            </div>
          </div>
        </div>
      </section>

      <!-- ðŸŒŸ PIXEL-PERFECT ANNOUNCEMENT SECTION -->
      <section class="news-section">
        <div class="news-header">
          <h2>Latest News & Events</h2>
          <a href="news.html" class="see-all-link">See All News â†’</a>
        </div>

        <div class="featured-announcements" id="featuredGrid">
          
        </div>

        <div class="announcement-grid" id="announcementGrid">
          <div class="announcement-loading">Loading latest announcements...</div>
        </div>
      </section>

      <section>
        <div class="join-now-section">
          <div class="join-now-box">
            <h1>Want to be <br> a Southvillians?</h1>
            <a href="https://enrollment.sv8bshs.site/" target="_blank" rel="noopener noreferrer">ADMISSION FORM ONLINE REGISTRATION</a>
          </div>
        </div>
      </section>

      <section>
        <div class="map-location-section">
          <div class="map-location-box">
            <h1>Our Location</h1>
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1252.2102981877435!2d121.15092542062047!3d14.74844725329229!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3397bb4ba7d9bf57%3A0x749aaf7dc9947d1e!2sSouthville%208B%20Senior%20High%20School!5e1!3m2!1sen!2sph!4v1762751816400!5m2!1sen!2sph" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
          </div>
        </div>
      </section>

      <!-- PROFESSIONAL FOOTER -->
      <footer>
        <div class="footer-container">
          <div class="footer-section">
            <h3>About Southville 8B</h3>
            <p>Southville 8B Senior High School is committed to providing quality education that prepares students for higher education and future careers through specialized tracks in TVL and HUMSS.</p>
            <div class="social-links">
              <a href="#" aria-label="Facebook">Facebook: DepEd Tayo Southville 8B SHS</a>
            </div>
          </div>
          
          <div class="footer-section">
            <h3>Quick Links</h3>
            <ul class="footer-links">
              <li><a href="index.html">Home</a></li>
              <li><a href="aboutus.html">About Us</a></li>
              <li><a href="admission.html">Admission</a></li>
              <li><a href="assessment.html">Strand Assessment</a></li>
              <li><a href="news.html">News & Events</a></li>
            </ul>
          </div>
          
          <div class="footer-section">
            <h3>Contact Info</h3>
            <p><strong>Address:</strong> Southville 8B, San Pedro, Laguna</p>
            <p><strong>Phone:</strong> (049) 123-4567</p>
            <p><strong>Email:</strong> info@southville8b.edu.ph</p>
            <p><strong>Office Hours:</strong> Mon-Fri, 8:00 AM - 5:00 PM</p>
          </div>
        </div>
        
        <div class="footer-bottom">
          <p>&copy; 2025 Southville 8B Senior High School. All Rights Reserved. | 
            <a href="privacy-policy.html">Privacy Policy</a> | 
            <a href="terms.html">Terms of Service</a>
          </p>
        </div>
      </footer>
    </main>
  </header>

  <script>
    const toggle = document.getElementById("menu-toggle");
    const navLinks = document.getElementById("nav-links");
    toggle.addEventListener("click", () => {
      navLinks.classList.toggle("active");
    });

    async function loadLatestAnnouncements() {
    const grid = document.getElementById("announcementGrid");
    grid.innerHTML = `<div class="announcement-loading">Loading latest announcements...</div>`;
    
    try {
      const res = await fetch("https://desktop-backend.onrender.com/api/announcements/latest");
      const announcements = await res.json();
      
      // Separate featured and regular announcements
      const featured = announcements.filter(item => item.is_featured == true);
      const regular = announcements.filter(item => !item.is_featured || item.is_featured === false);
      
      // Display featured announcements
      const featuredGrid = document.getElementById("featuredGrid");
      if (featured.length > 0) {
       featuredGrid.innerHTML = featured.map(item => {
        const date = new Date(item.created_at).toLocaleDateString('en-US', {
          year: 'numeric', month: '2-digit', day: '2-digit'
        });
        return `
          <div class="featured-card">
            <div class="featured-badge">URGENT</div>
            <h3 style="color: #000000; margin-top: 0.5rem;">${item.title}</h3>
            <p>${item.short_description}</p>
            <small style="color: #6b7280;">Posted: ${new Date(item.created_at).toLocaleDateString()}</small>
          </div>
        `;
      }).join("");
      } else {
         featuredGrid.innerHTML = `<p>No featured available yet.</p>`;
      }
      
      // Display regular announcements (MISSING PART)
      if (regular.length > 0) {
        grid.innerHTML = regular.map(item => {
          const date = new Date(item.created_at).toLocaleDateString('en-US', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit'
          });
          
          return `
            <div class="announcement-card">
              <a href="announcement-view.html?id=${item.id}" class="read-more-btn">
                <div class="announcement-image-wrapper">
                  <img src="${item.image}" alt="${item.title}" class="announcement-image">
                  <div class="announcement-date">${date}</div>
                </div>
                <div class="announcement-body">
                  <h3>${item.title}</h3>
                  <p>${item.short_description}</p>
                </div>
              </a>
            </div>
          `;
        }).join("");
      } else {
        grid.innerHTML = `<p class="no-announcements">No announcements available yet.</p>`;
      }
      
    } catch (err) {
      console.error(err);
      grid.innerHTML = `<p class="no-announcements">Failed to load announcements.</p>`;
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    loadLatestAnnouncements();
  });
  </script>
</body>
</html>